<!DOCTYPE html>
<html>
	<head>
		<title>Settings | keepassxc-browser</title>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="bootstrap.min.css" />
		<link rel="stylesheet" href="options.css" />
		<script type="text/javascript" src="../browser-polyfill.min.js"></script>
		<script type="text/javascript" src="../global.js"></script>
		<script type="text/javascript" src="../jquery-3.2.1.min.js"></script>
		<script type="text/javascript" src="bootstrap.min.js"></script>
		<script type="text/javascript" src="options.js"></script>
	</head>
	<body>
		<div class="container">
			<h3 class="muted"><img src="/icons/keepassxc_48x48.png" alt="logo" /> keepassxc-browser</h3>

			<nav class="navbar navbar-default">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#general-settings">General</a></li>
					<li><a href="#connected-databases">Connected Databases</a></li>
					<li><a href="#specified-fields">Specified credential fields</a></li>
					<li><a href="#about">About</a></li>
				</ul>
			</nav>

			<!-- General Settings -->
			<div class="tab" id="tab-general-settings">
				<h2>General Settings</h2>
				<hr />
				<p>
					If you just want to insert username + password into the fields where your focus is, press <code>Ctrl + Shift + U</code>.
					<br />
					If you only want to insert the password, just press <code>Ctrl + Shift + P</code>.
					<span id="chrome-only">You can customize these shortcuts on <code>chrome://extensions/configureCommands</code> page</span>
				</p>
				<p>
					<div class="form-group">
						<label for="blinkTimeout">Blink Time:</label>
						<div class="control-group">
							<div class="input-append">
								<input type="number" id="blinkTimeout" placeholder="7500" value="7500" />
								<button class="btn btn-sm" id="blinkTimeoutButton" type="button">Save</button>
							</div>
						</div>
						<span class="help-inline">
							What is the maximum time (ms) the icon should blink after detecting new credentials
							<br />
							Default: 7500
						</span>
					</div>
				</p>
				<p>
					<div class="form-group">
						<label for="blinkMinTimeout">Redirect Offset:</label>
						<div class="control-group">
							<div class="input-append">
								<input type="number" id="blinkMinTimeout" placeholder="2000" value="2000" />
								<button class="btn btn-sm" id="blinkMinTimeoutButton" type="button">Save</button>
							</div>
						</div>
						<span class="help-inline">
							What is the minimum time (ms) the icon should blink before deactivating due to page redirects.
							<br />
							-1 to only use <i>Blink Time</i> ignoring Redirect Allowance (old behavior)
							<br />
							Default: -1, Recommended: 2000
						</span>
					</div>
				</p>
				<p>
					<div class="form-group">
						<label for="allowedRedirect">Redirect Allowance:</label>
						<div class="control-group">
							<div class="input-append">
								<input type="number" id="allowedRedirect" placeholder="1" value="1" />
								<button class="btn btn-sm" id="allowedRedirectButton" type="button">Save</button>
							</div>
						</div>
						<span class="help-inline">
							How many pages should the tab cycle through after the redirect offset before deactivating the icon
							<br />
							Default: 1
						</span>
					</div>
				</p>
				<p>
					<div class="form-group">
						<label for="port">UDP port for proxy applications:</label>
						<div class="control-group">
							<div class="input-append">
								<input type="number" id="port" placeholder="19700" value="19700" />
								<button class="btn btn-sm" id="portButton" type="button">Save</button>
							</div>
							<span class="help-inline">
								Change the port if you have trouble with running KeePassXC on the default port.
								<br />
								You have to set the same port number in KeePassXC options.
								<br />
								Default: 19700
							</span>
						</div>
					</div>
				</p>
				<hr />
				<p>
					<div class="checkbox">
						<label class="checkbox">
							<input type="checkbox" name="usePasswordGenerator" value="true" /> Activate password generator.
						</label>
						<span class="help-block">For all password-fields there will be an icon added to generate a new password.<br />
							It is generated by KeePassXC with the profile for automatically generated passwords for new entries.</span>
					</div>
				</p>
				<hr />
				<p>
					<div class="checkbox">
						<label class="checkbox">
							<input type="checkbox" name="autoRetrieveCredentials" value="true" /> Automatically retrieve credentials.
						</label>
						<span class="help-block">keepassxc-browser will immediately retrieve the credentials when the tab is activated.</span>
					</div>
				</p>
				<hr />
				<p>
					<div class="checkbox">
						<label class="checkbox">
							<input type="checkbox" name="autoFillSingleEntry" value="false" /> Automatically fill-in single credentials entry.
						</label>
						<span class="help-block">If keepassxc-browser does only receive a single entry from KeePassXC it automatically fills this credentials into the found credential fields.</span>
						<span class="bg-danger">Warning! Using auto-fill is not safe. Use at your own risk.</span>
					</div>
				</p>
				<hr />
				<p>
					<div class="checkbox">
						<label class="checkbox">
							<input type="checkbox" name="autoCompleteUsernames" value="true" /> Activate autocomplete for username fields.
						</label>
						<span class="help-block">For all username fields on a page a dropdown list appears which contains all available credentials.</span>
					</div>
				</p>
				<hr />
				<p>
					Check for updates of KeePassXC:
					<br />
					<label class="radio-inline"><input type="radio" name="checkUpdateKeePassXC" value="3" /> every 3 days</label>
					<label class="radio-inline"><input type="radio" name="checkUpdateKeePassXC" value="7" /> every week</label>
					<label class="radio-inline"><input type="radio" name="checkUpdateKeePassXC" value="30" /> every month</label>
					<label class="radio-inline"><input type="radio" name="checkUpdateKeePassXC" value="0" /> never</label>
				</p>
				<div class="help-block kphVersion">
					keepassxc-browser needs KeePassXC to retrieve credentials.
					<br />
					You can download the latest stable version from here: <a target="_blank" href="https://keepassxc.org/">https://keepassxc.org/</a>
					<br />
					<br />
					<div>
						Your running version of KeePassXC: <em class="yourVersion"></em>
					</div>
					<div>
						Latest available version of KeePassXC: <em class="latestVersion"></em>
						<button class="btn btn-sm checkUpdateKeePassXC">Check for updates</button>
					</div>
				</div>
				<hr />
				<p>
					<div class="checkbox">
						<label class="checkbox">
							<input type="checkbox" name="autoFillAndSend" value="1" /> Auto fill HTTP Auth dialogs and send them.
						</label>
						<span class="help-block">
							If credentials are found for a page and the login-type is an HTTP Auth request, keepassxc-browser tries to login with the first given credentials.
							<br />
							An HTTP Auth dialog looks like this:
						</span>
					</div>
					<img src="/options/http-auth-dialog.png" alt="http-auth-dialog" />
				</p>
			</div>

			<!-- Connected Databases -->
			<div class="tab" id="tab-connected-databases">
				<h2>Connected Databases</h2>
				<hr />
				<p>
					The following KeePassXC databases are connected to keepassxc-browser.
				</p>
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Identifier</th>
							<th>Key</th>
							<th>Last used</th>
							<th>Created</th>
							<th>Delete</th>
						</tr>
					</thead>
					<tbody>
						<tr class="empty">
							<td colspan="5">No connected databases found.</td>
						</tr>
						<tr class="clone">
							<td></td>
							<td></td>
							<td class="last-used"></td>
							<td class="created"></td>
							<td><button class="btn delete btn-danger">Remove</button></td>
						</tr>
					</tbody>
				</table>
				<div style="text-align: right">
					<button id="connect-button" class="btn btn-primary">Connect</button>
				</div>

				<div id="dialogDeleteConnectedDatabase" class="modal fade" tabindex="-1" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
								<h3 class="modal-title" id="myModalLabel">Remove identifier from Chrome?</h3>
							</div>
							<div class="modal-body">
								<p>Do you really want to remove the identifier <span class="bold"></span> from Chrome?</p>
								<p class="help-block">You can reconnect your database at any time.</p>
							</div>
							<div class="modal-footer">
								<button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button>
								<button class="btn yes btn-primary">Yes, remove now</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Specified credential fields -->
			<div class="tab" id="tab-specified-fields">
				<h2>Specified credential fields</h2>
				<hr />
				<p>
					If keepassxc-browser detects the wrong credential fields, you are able to specify the correct fields by yourself.
					<br />
					Just go to the page and click on the keepassxc-browser-Icon, now select <em>Choose own credential fields for this page</em>.
					<br />
					On this page you can manage theses specified credential fields.
				</p>
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Page URL</th>
							<th>Delete</th>
						</tr>
					</thead>
					<tbody>
						<tr class="empty">
							<td colspan="2">No specified credential fields found.</td>
						</tr>
						<tr class="clone">
							<td></td>
							<td><button class="btn delete btn-danger btn">Remove</button></td>
						</tr>
					</tbody>
				</table>
				<div id="dialogDeleteSpecifiedCredentialFields" class="modal fade" tabindex="-1" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
								<h3 id="myModalLabel">Remove specified credential fields?</h3>
							</div>
							<div class="modal-body">
								<p>Do you really want to remove the specified credential fields on the page <strong></strong>?</p>
								<p class="help-block">keepassxc-browser will automatically detect the credential fields the next time you visit this page.</p>
							</div>
							<div class="modal-footer">
								<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
								<button class="btn yes btn-primary">Yes, remove now</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- About -->
			<div class="tab" id="tab-about">
				<h2>About</h2>
				<hr />
				<p>
					Developed by <a target="_blank" href="https://github.com/pfn/">Perry Nguyen</a>, <a target="_blank" href="http://lukas-schulze.de">Lukas Schulze</a> and 
					<a target="_blank" href="https://github.com/varjolintu/">Sami Vänttinen</a>
				</p>
				<p>
					<a target="_blank" href="https://chrome.google.com/webstore/detail/keepassxc-browser/iopaggbpplllidnfmcghoonnokmjoicf">Visit extension's page in Chrome Web store</a>
				</p>
				<p>
					<a target="_blank" href="https://addons.mozilla.org/en-US/firefox/addon/keepassxc-browser/">Visit extension's page in Mozilla's Add-ons page</a>
				</p>
				<p>
					<a target="_blank" href="https://github.com/varjolintu/keepassxc-browser">Visit project's page in GitHub</a>.
				</p>
				<hr />
				<p>
					keepassxc-browser Version: <em class="versionCIP"></em>
				</p>
				<p>
					KeePassXC Version: <em class="versionKPH"></em>
				</p>
			</div>
			<hr>
			<div class="footer">
				<p>2010-2017 - Perry Nguyen, Lukas Schulze, Angus Gratton, Andy Brandt, Sami Vänttinen</p>
			</div>
		</div> <!-- /container -->
	</body>
</html>
